# Mermaid é…ç½®èˆ‡æ“´å……å¥—ä»¶è¨­å®šè¨˜éŒ„

**é…ç½®æ—¥æœŸ**ï¼š2025-10-30
**é…ç½®ç›®çš„**ï¼šå»ºç«‹ç©©å®šçš„ Mermaid é è¦½ç’°å¢ƒ
**æœ€çµ‚ç‹€æ…‹**ï¼šâœ… å·²å®Œæˆä¸¦é©—è­‰

---

## ğŸ“‹ ç›®éŒ„

1. [VS Code æ“´å……å¥—ä»¶é…ç½®](#vs-code-æ“´å……å¥—ä»¶é…ç½®)
2. [å¿«æ·éµé…ç½®](#å¿«æ·éµé…ç½®)
3. [Mermaid èªæ³•é…ç½®](#mermaid-èªæ³•é…ç½®)
4. [å°ˆæ¡ˆç‰¹å®šé…ç½®](#å°ˆæ¡ˆç‰¹å®šé…ç½®)
5. [é…ç½®é©—è­‰](#é…ç½®é©—è­‰)
6. [ç¶­è­·å»ºè­°](#ç¶­è­·å»ºè­°)

---

## VS Code æ“´å……å¥—ä»¶é…ç½®

### å·²å®‰è£çš„æ“´å……å¥—ä»¶æ¸…å–®

#### 1. Markdown Preview Enhancedï¼ˆä¸»è¦é è¦½å·¥å…·ï¼‰

**æ“´å……å¥—ä»¶è³‡è¨Š**ï¼š
```
ID: shd101wyy.markdown-preview-enhanced
ç‰ˆæœ¬: 0.8.19
å®‰è£æ—¥æœŸ: 2025-10-30
```

**å®‰è£å‘½ä»¤**ï¼š
```bash
code --install-extension shd101wyy.markdown-preview-enhanced
```

**é…ç½®åŸå› **ï¼š
- æä¾›ç©©å®šçš„ Mermaid æ¸²æŸ“å¼•æ“
- æ”¯æ´å¤šç¨®åœ–è¡¨é¡å‹ï¼ˆMermaidã€PlantUMLã€Graphvizã€WaveDromï¼‰
- å¯åŒ¯å‡ºå¤šç¨®æ ¼å¼ï¼ˆPDFã€HTMLã€PNGï¼‰
- ç¤¾ç¾¤æ”¯æ´è‰¯å¥½ï¼Œæ›´æ–°é »ç‡é«˜

**åŠŸèƒ½ç‰¹æ€§**ï¼š
- âœ… è‡ªå‹•æ¸²æŸ“ Mermaid åœ–è¡¨
- âœ… å³æ™‚é è¦½æ›´æ–°
- âœ… æ”¯æ´è‡ªè¨‚ CSS æ¨£å¼
- âœ… æ”¯æ´æ•¸å­¸å…¬å¼ (KaTeX/MathJax)
- âœ… æ”¯æ´ç›®éŒ„ç”Ÿæˆ
- âœ… æ”¯æ´ç¨‹å¼ç¢¼å¡ŠåŸ·è¡Œ
- âœ… æ”¯æ´ç°¡å ±æ¨¡å¼

**é è¨­è¨­å®š**ï¼š
```json
{
  "markdown-preview-enhanced.enableScriptExecution": false,
  "markdown-preview-enhanced.mermaidTheme": "default",
  "markdown-preview-enhanced.codeBlockTheme": "default",
  "markdown-preview-enhanced.previewTheme": "github-light.css",
  "markdown-preview-enhanced.automaticallyShowPreviewOfMarkdownBeingEdited": false
}
```

**å»ºè­°çš„è‡ªè¨‚è¨­å®š**ï¼ˆå¯é¸ï¼‰ï¼š

æª”æ¡ˆä½ç½®ï¼š`C:\Users\yeats\AppData\Roaming\Code\User\settings.json`

```json
{
  // Mermaid ä¸»é¡Œè¨­å®š
  "markdown-preview-enhanced.mermaidTheme": "default",

  // ç¨‹å¼ç¢¼å€å¡Šä¸»é¡Œ
  "markdown-preview-enhanced.codeBlockTheme": "github.css",

  // é è¦½ä¸»é¡Œ
  "markdown-preview-enhanced.previewTheme": "github-light.css",

  // è‡ªå‹•é¡¯ç¤ºé è¦½ï¼ˆä¸å»ºè­°é–‹å•Ÿï¼Œæœƒæ¶ˆè€—è³‡æºï¼‰
  "markdown-preview-enhanced.automaticallyShowPreviewOfMarkdownBeingEdited": false,

  // å•Ÿç”¨è¡¨æƒ…ç¬¦è™Ÿæ”¯æ´
  "markdown-preview-enhanced.enableEmojiSyntax": true,

  // å•Ÿç”¨ Wiki é€£çµ
  "markdown-preview-enhanced.enableWikiLinkSyntax": false,

  // æ•¸å­¸æ¸²æŸ“å¼•æ“ï¼ˆKaTeX è¼ƒå¿«ï¼ŒMathJax åŠŸèƒ½æ›´å®Œæ•´ï¼‰
  "markdown-preview-enhanced.mathRenderingOption": "KaTeX"
}
```

**å¯ç”¨çš„ä¸»é¡Œé¸é …**ï¼š

Mermaid ä¸»é¡Œï¼š
- `default` - é è¨­ä¸»é¡Œ
- `dark` - æ·±è‰²ä¸»é¡Œ
- `forest` - æ£®æ—ä¸»é¡Œï¼ˆç¶ è‰²ï¼‰
- `neutral` - ä¸­æ€§ä¸»é¡Œï¼ˆç°è‰²ï¼‰

é è¦½ä¸»é¡Œï¼š
- `github-light.css` - GitHub äº®è‰²ä¸»é¡Œï¼ˆæ¨è–¦ï¼‰
- `github-dark.css` - GitHub æš—è‰²ä¸»é¡Œ
- `atom-dark.css` - Atom æš—è‰²ä¸»é¡Œ
- `atom-light.css` - Atom äº®è‰²ä¸»é¡Œ
- `solarized-light.css` - Solarized äº®è‰²
- `solarized-dark.css` - Solarized æš—è‰²
- `monokai.css` - Monokai ä¸»é¡Œ

---

#### 2. Markdown Preview Mermaid Supportï¼ˆå‚™ç”¨æ”¯æ´ï¼‰

**æ“´å……å¥—ä»¶è³‡è¨Š**ï¼š
```
ID: bierner.markdown-mermaid
ç‰ˆæœ¬: 1.29.0
å®‰è£æ—¥æœŸ: 2025-10-30ï¼ˆé‡æ–°å®‰è£ï¼‰
```

**å®‰è£å‘½ä»¤**ï¼š
```bash
code --install-extension bierner.markdown-mermaid
```

**é…ç½®åŸå› **ï¼š
- ç‚º VS Code å…§å»º Markdown é è¦½æä¾› Mermaid æ”¯æ´
- ä½œç‚ºå‚™ç”¨æ–¹æ¡ˆï¼ˆä½¿ç”¨ `Ctrl+K V` æ™‚ï¼‰
- è¼•é‡ç´šï¼Œå•Ÿå‹•å¿«é€Ÿ

**å·²çŸ¥é™åˆ¶**ï¼š
- âš ï¸ å°è¤‡é›œ `subgraph` çµæ§‹æ”¯æ´ä¸ç©©å®š
- âš ï¸ å¯èƒ½å‡ºç¾åœ–è¡¨é–ƒçˆå•é¡Œ
- âš ï¸ æ¸²æŸ“å¼•æ“ç›¸å®¹æ€§è¼ƒå·®

**ä½¿ç”¨å ´æ™¯**ï¼š
- å¿«é€ŸæŸ¥çœ‹ç°¡å–®çš„ Mermaid åœ–è¡¨
- ä¸éœ€è¦åŒ¯å‡ºæˆ–é€²éšåŠŸèƒ½æ™‚
- ä½œç‚º Markdown Preview Enhanced çš„å‚™æ´

**ç„¡éœ€ç‰¹æ®Šé…ç½®**ï¼Œä½¿ç”¨é è¨­è¨­å®šå³å¯ã€‚

---

#### 3. Mermaid Markdown Syntax Highlightingï¼ˆèªæ³•é«˜äº®ï¼‰

**æ“´å……å¥—ä»¶è³‡è¨Š**ï¼š
```
ID: bpruitt-goddard.mermaid-markdown-syntax-highlighting
ç‰ˆæœ¬: 1.7.4
å®‰è£æ—¥æœŸ: 2025-10-30
```

**å®‰è£å‘½ä»¤**ï¼š
```bash
code --install-extension bpruitt-goddard.mermaid-markdown-syntax-highlighting
```

**é…ç½®åŸå› **ï¼š
- ç‚º Mermaid ç¨‹å¼ç¢¼å¡Šæä¾›èªæ³•é«˜äº®
- æå‡ç¨‹å¼ç¢¼å¯è®€æ€§
- å¹«åŠ©ç™¼ç¾èªæ³•éŒ¯èª¤

**æ”¯æ´çš„èªæ³•å…ƒç´ **ï¼š
- åœ–è¡¨é¡å‹é—œéµå­—ï¼ˆ`flowchart`, `sequenceDiagram`, `classDiagram` ç­‰ï¼‰
- ç¯€é»å®šç¾©å’Œæ¨™ç±¤
- é€£ç·šç¬¦è™Ÿï¼ˆ`-->`, `-.->`, `==>` ç­‰ï¼‰
- æ¨£å¼å®šç¾©ï¼ˆ`style`, `classDef` ç­‰ï¼‰
- è¨»è§£ï¼ˆ`%%` é–‹é ­ï¼‰

**ç„¡éœ€ç‰¹æ®Šé…ç½®**ï¼Œå®‰è£å¾Œè‡ªå‹•ç”Ÿæ•ˆã€‚

---

### æ“´å……å¥—ä»¶ç›¸ä¾é—œä¿‚

```
Markdown Preview Enhancedï¼ˆä¸»è¦ï¼‰
    â†“ æä¾›é è¦½åŠŸèƒ½
    â”œâ”€ Mermaid.js æ¸²æŸ“å¼•æ“ï¼ˆå…§å»ºï¼‰
    â”œâ”€ æ”¯æ´å¤šç¨®åœ–è¡¨é¡å‹
    â””â”€ åŒ¯å‡ºåŠŸèƒ½

Markdown Preview Mermaid Supportï¼ˆå‚™ç”¨ï¼‰
    â†“ æ”¯æ´å…§å»ºé è¦½
    â””â”€ åƒ…åœ¨ä½¿ç”¨ Ctrl+K V æ™‚å•Ÿç”¨

Mermaid Markdown Syntax Highlightingï¼ˆè¼”åŠ©ï¼‰
    â†“ æä¾›ç·¨è¼¯å™¨æ”¯æ´
    â””â”€ èªæ³•é«˜äº®é¡¯ç¤º
```

---

### æ“´å……å¥—ä»¶ç‰ˆæœ¬ç®¡ç†

**æª¢æŸ¥å·²å®‰è£ç‰ˆæœ¬**ï¼š
```bash
code --list-extensions --show-versions | grep -i mermaid
```

**é æœŸè¼¸å‡º**ï¼š
```
bierner.markdown-mermaid@1.29.0
bpruitt-goddard.mermaid-markdown-syntax-highlighting@1.7.4
shd101wyy.markdown-preview-enhanced@0.8.19
```

**æ›´æ–°æ“´å……å¥—ä»¶**ï¼š
```bash
# æ›´æ–°æ‰€æœ‰æ“´å……å¥—ä»¶
code --update-extensions

# æˆ–æ‰‹å‹•æ›´æ–°ç‰¹å®šæ“´å……å¥—ä»¶
code --install-extension shd101wyy.markdown-preview-enhanced --force
```

**å»ºè­°çš„æ›´æ–°é€±æœŸ**ï¼š
- æ¯å­£åº¦æª¢æŸ¥ä¸€æ¬¡æ›´æ–°
- é‡å¤§ç‰ˆæœ¬æ›´æ–°å‰å…ˆåœ¨æ¸¬è©¦ç’°å¢ƒé©—è­‰
- é—œæ³¨ GitHub Release Notes

---

## å¿«æ·éµé…ç½®

### é…ç½®æª”æ¡ˆä½ç½®

```
Windows: C:\Users\[username]\AppData\Roaming\Code\User\keybindings.json
macOS: ~/Library/Application Support/Code/User/keybindings.json
Linux: ~/.config/Code/User/keybindings.json
```

### å®Œæ•´çš„å¿«æ·éµé…ç½®

**æª”æ¡ˆå…§å®¹**ï¼š`keybindings.json`

```json
[
    {
        "key": "ctrl+a ctrl+a",
        "command": "workbench.view.extension.claude-sidebar",
        "when": "editorTextFocus"
    },
    {
        "key": "ctrl+shift+v",
        "command": "markdown-preview-enhanced.openPreview",
        "when": "editorLangId == markdown"
    },
    {
        "key": "ctrl+k v",
        "command": "markdown.showPreview",
        "when": "editorLangId == markdown"
    }
]
```

### å¿«æ·éµèªªæ˜

#### 1. Markdown Preview Enhanced é è¦½

```json
{
    "key": "ctrl+shift+v",
    "command": "markdown-preview-enhanced.openPreview",
    "when": "editorLangId == markdown"
}
```

**åŠŸèƒ½**ï¼šé–‹å•Ÿ Markdown Preview Enhanced é è¦½è¦–çª—

**è§¸ç™¼æ¢ä»¶**ï¼š
- æŒ‰éµï¼š`Ctrl+Shift+V`
- æ¢ä»¶ï¼šç•¶å‰ç·¨è¼¯å™¨èªè¨€ç‚º Markdown

**è¡Œç‚º**ï¼š
- åœ¨å³å´é–‹å•Ÿé è¦½è¦–çª—
- è‡ªå‹•æ¸²æŸ“æ‰€æœ‰ Mermaid åœ–è¡¨
- å³æ™‚åŒæ­¥æ²å‹•

**è¦†è“‹çš„é è¨­å¿«æ·éµ**ï¼š
- åŸæœ¬çš„ `Ctrl+Shift+V` ç¶å®šåˆ° `markdown.showPreview`
- å·²æ”¹ç‚º `Ctrl+K V`

---

#### 2. æ¨™æº– Markdown é è¦½ï¼ˆå‚™ç”¨ï¼‰

```json
{
    "key": "ctrl+k v",
    "command": "markdown.showPreview",
    "when": "editorLangId == markdown"
}
```

**åŠŸèƒ½**ï¼šé–‹å•Ÿ VS Code å…§å»º Markdown é è¦½

**è§¸ç™¼æ¢ä»¶**ï¼š
- æŒ‰éµï¼š`Ctrl+K V`ï¼ˆå…ˆæŒ‰ Ctrl+Kï¼Œæ”¾é–‹å¾ŒæŒ‰ Vï¼‰
- æ¢ä»¶ï¼šç•¶å‰ç·¨è¼¯å™¨èªè¨€ç‚º Markdown

**ä½¿ç”¨å ´æ™¯**ï¼š
- å¿«é€ŸæŸ¥çœ‹ç´” Markdown å…§å®¹ï¼ˆä¸éœ€è¦é€²éšåŠŸèƒ½ï¼‰
- Markdown Preview Enhanced å‡ºå•é¡Œæ™‚çš„å‚™æ´
- è¼ƒä½çš„è¨˜æ†¶é«”ä½”ç”¨

---

### å¿«æ·éµè¡çªè™•ç†

**å¸¸è¦‹è¡çª**ï¼š

1. **Ctrl+Shift+V èˆ‡è²¼ä¸Šæ ¼å¼åŒ–æ–‡å­—**
   - æŸäº›ç³»çµ±è¨­å®šä¸­ï¼Œ`Ctrl+Shift+V` ç”¨æ–¼è²¼ä¸Šç´”æ–‡å­—
   - è§£æ±ºæ–¹æ¡ˆï¼šVS Code çš„ `when` æ¢ä»¶ç¢ºä¿åªåœ¨ Markdown æ–‡ä»¶ä¸­ç”Ÿæ•ˆ

2. **èˆ‡å…¶ä»–æ“´å……å¥—ä»¶è¡çª**
   - æŸ¥çœ‹æ‰€æœ‰ç¶å®šåˆ°åŒä¸€å¿«æ·éµçš„å‘½ä»¤ï¼š
   ```
   Ctrl+K Ctrl+S â†’ æœå°‹ "ctrl+shift+v"
   ```

**è‡ªè¨‚å¿«æ·éµï¼ˆå¯é¸ï¼‰**ï¼š

å¦‚æœ `Ctrl+Shift+V` èˆ‡å…¶ä»–å·¥å…·è¡çªï¼Œå¯æ”¹ç”¨ï¼š

```json
{
    "key": "ctrl+alt+m",
    "command": "markdown-preview-enhanced.openPreview",
    "when": "editorLangId == markdown"
}
```

æˆ–

```json
{
    "key": "f5",
    "command": "markdown-preview-enhanced.openPreview",
    "when": "editorLangId == markdown"
}
```

---

### å…¶ä»–æœ‰ç”¨çš„å¿«æ·éµï¼ˆå¯é¸é…ç½®ï¼‰

#### é è¦½æ§åˆ¶

```json
{
    "key": "ctrl+k ctrl+p",
    "command": "markdown-preview-enhanced.syncPreview",
    "when": "editorLangId == markdown"
}
```
**åŠŸèƒ½**ï¼šåŒæ­¥é è¦½ä½ç½®åˆ°æ¸¸æ¨™ä½ç½®

---

#### å´é‚Šé è¦½

```json
{
    "key": "ctrl+k ctrl+m",
    "command": "markdown-preview-enhanced.openPreviewToTheSide",
    "when": "editorLangId == markdown"
}
```
**åŠŸèƒ½**ï¼šåœ¨å´é‚Šé–‹å•Ÿé è¦½ï¼ˆä¸è¦†è“‹ç•¶å‰è¦–çª—ï¼‰

---

#### åŒ¯å‡º PDF

```json
{
    "key": "ctrl+shift+e",
    "command": "markdown-preview-enhanced.exportToPDF",
    "when": "editorLangId == markdown"
}
```
**åŠŸèƒ½**ï¼šå°‡ Markdown åŒ¯å‡ºç‚º PDF

---

## Mermaid èªæ³•é…ç½®

### å°ˆæ¡ˆèªæ³•æ¨™æº–

#### ä½¿ç”¨ flowchart èªæ³•ï¼ˆæ¨è–¦ï¼‰

**æ­£ç¢ºç¯„ä¾‹**ï¼š
```mermaid
flowchart TB
    A[é–‹å§‹] --> B[è™•ç†]
    B --> C{æ±ºç­–}
    C -->|æ˜¯| D[çµæœ1]
    C -->|å¦| E[çµæœ2]
```

**é¿å…ä½¿ç”¨ graph èªæ³•**ï¼ˆå·²æ·˜æ±°ï¼‰ï¼š
```mermaid
graph TB
    A[é–‹å§‹] --> B[è™•ç†]
```

---

#### subgraph ä½¿ç”¨å»ºè­°

**ç°¡å–®çš„ subgraph**ï¼ˆå¯ä»¥ä½¿ç”¨ï¼‰ï¼š
```mermaid
flowchart TB
    subgraph S1["æ¨¡çµ„A"]
        A1[çµ„ä»¶1]
        A2[çµ„ä»¶2]
    end

    A1 --> A2
```

**è¤‡é›œçš„å·¢ç‹€ subgraph**ï¼ˆé¿å…ä½¿ç”¨ï¼‰ï¼š
```mermaid
flowchart TB
    subgraph S1["å¤–å±¤"]
        subgraph S2["ä¸­å±¤"]
            subgraph S3["å…§å±¤"]
                A[ç¯€é»]
            end
        end
    end
```

**æ›¿ä»£æ–¹æ¡ˆ**ï¼šä½¿ç”¨æ‰å¹³åŒ–çµæ§‹ + è¨»è§£
```mermaid
flowchart TB
    %% æ¨¡çµ„Aï¼ˆå¤–å±¤ï¼‰
    A1[çµ„ä»¶1] --> A2[çµ„ä»¶2]

    %% æ¨¡çµ„Bï¼ˆä¸­å±¤ï¼‰
    B1[çµ„ä»¶3] --> B2[çµ„ä»¶4]

    A2 --> B1
```

---

#### æ¨£å¼å®šç¾©

**æ¨è–¦çš„æ¨£å¼å¯«æ³•**ï¼š
```mermaid
flowchart TB
    A[é–‹å§‹] --> B[è™•ç†]
    B --> C[çµæŸ]

    style A fill:#E3F2FD,stroke:#1976D2,stroke-width:2px
    style B fill:#FFF3E0,stroke:#F57C00,stroke-width:2px
    style C fill:#C8E6C9,stroke:#388E3C,stroke-width:2px
```

**ä½¿ç”¨ classDef**ï¼ˆé©åˆé‡è¤‡æ¨£å¼ï¼‰ï¼š
```mermaid
flowchart TB
    A[ç¯€é»A]:::inputClass
    B[ç¯€é»B]:::processClass
    C[ç¯€é»C]:::outputClass

    A --> B --> C

    classDef inputClass fill:#E3F2FD,stroke:#1976D2,stroke-width:2px
    classDef processClass fill:#FFF3E0,stroke:#F57C00,stroke-width:2px
    classDef outputClass fill:#C8E6C9,stroke:#388E3C,stroke-width:2px
```

---

### èªæ³•æª¢æŸ¥è…³æœ¬

**æª”æ¡ˆä½ç½®**ï¼š`check_mermaid.sh`

**è…³æœ¬å…§å®¹**ï¼š
```bash
#!/bin/bash

echo "ğŸ” æª¢æŸ¥å°ˆæ¡ˆä¸­çš„ Mermaid åœ–è¡¨èªæ³•..."
echo "==========================================="

# çµ±è¨ˆ Markdown æ–‡ä»¶
md_files=$(find . -name "*.md" -not -path "*/node_modules/*" -not -path "*/.git/*" | wc -l)
mermaid_files=$(grep -r "^\`\`\`mermaid" . --include="*.md" -l | wc -l)

echo "ç¸½ Markdown æ–‡ä»¶æ•¸: $md_files"
echo "åŒ…å« Mermaid çš„æ–‡ä»¶: $mermaid_files"
echo ""

# éæ­·æ¯å€‹åŒ…å« Mermaid çš„æ–‡ä»¶
echo "æª¢æŸ¥å„æ–‡ä»¶..."
grep -r "^\`\`\`mermaid" . --include="*.md" -l | while read file; do
    echo "ğŸ“„ æª”æ¡ˆ: $file"

    # è¨ˆç®— Mermaid å€å¡Šæ•¸
    block_count=$(grep -c "^\`\`\`mermaid" "$file")
    echo "   Mermaid å€å¡Šæ•¸: $block_count"

    # æª¢æŸ¥ graph èªæ³•
    graph_count=$(grep -A 1 "^\`\`\`mermaid" "$file" | grep -c "^graph ")
    if [ $graph_count -gt 0 ]; then
        echo "   âš ï¸  ä½¿ç”¨ graph èªæ³•: $graph_count å€‹ (å»ºè­°ä¿®å¾©)"
    fi

    # æª¢æŸ¥ flowchart èªæ³•
    flowchart_count=$(grep -A 1 "^\`\`\`mermaid" "$file" | grep -c "^flowchart ")
    if [ $flowchart_count -gt 0 ]; then
        echo "   âœ… ä½¿ç”¨ flowchart èªæ³•: $flowchart_count å€‹"
    fi

    # æª¢æŸ¥ subgraph ä½¿ç”¨
    subgraph_count=$(grep -c "subgraph" "$file")
    if [ $subgraph_count -gt 0 ]; then
        echo "   âš ï¸  ä½¿ç”¨ subgraph: $subgraph_count å€‹ (å¯èƒ½å°è‡´æ¸²æŸ“å•é¡Œ)"
    fi

    echo ""
done

echo "==========================================="
echo "ğŸ“Š çµ±è¨ˆç¸½çµ"
echo "==========================================="

# å…¨å±€çµ±è¨ˆ
total_blocks=$(grep -r "^\`\`\`mermaid" . --include="*.md" | wc -l)
total_graph=$(grep -r "^\`\`\`mermaid" . --include="*.md" -A 1 | grep -c "^graph ")
total_flowchart=$(grep -r "^\`\`\`mermaid" . --include="*.md" -A 1 | grep -c "^flowchart ")
total_subgraph=$(grep -r "subgraph" . --include="*.md" | wc -l)

echo "Mermaid å€å¡Šç¸½æ•¸: $total_blocks"
echo ""
echo "èªæ³•ä½¿ç”¨æƒ…æ³:"
echo "  - graph èªæ³•: $total_graph å€‹ (å»ºè­°ä¿®å¾©)"
echo "  - flowchart èªæ³•: $total_flowchart å€‹ (æ¨è–¦)"
echo "  - ä½¿ç”¨ subgraph: $total_subgraph å€‹ (å¯èƒ½æœ‰å•é¡Œ)"
echo ""

if [ $total_graph -gt 0 ]; then
    echo "âš ï¸  ç™¼ç¾éœ€è¦ä¿®å¾©çš„èªæ³•ï¼"
    echo ""
    echo "ä¿®å¾©å»ºè­°:"
    echo "1. å°‡ 'graph TB' æ”¹ç‚º 'flowchart TB'"
    echo "2. å°‡ 'graph LR' æ”¹ç‚º 'flowchart LR'"
    echo "3. ç§»é™¤æˆ–ç°¡åŒ– subgraph çµæ§‹"
    echo "4. åƒè€ƒ: docs/Mermaid_æ•…éšœæ’é™¤.md"
else
    echo "âœ… æ‰€æœ‰èªæ³•ç¬¦åˆå»ºè­°è¦ç¯„ï¼"
fi

echo "==========================================="
```

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# è³¦äºˆåŸ·è¡Œæ¬Šé™
chmod +x check_mermaid.sh

# åŸ·è¡Œæª¢æŸ¥
./check_mermaid.sh

# æˆ–ç›´æ¥ç”¨ bash
bash check_mermaid.sh
```

---

### èªæ³•é©—è­‰æµç¨‹

**é–‹ç™¼éšæ®µé©—è­‰**ï¼š

1. **ç·¨å¯« Mermaid ç¨‹å¼ç¢¼**
   - åœ¨ VS Code ä¸­ç·¨å¯«
   - åˆ©ç”¨èªæ³•é«˜äº®æª¢æŸ¥åŸºæœ¬èªæ³•

2. **æœ¬åœ°é è¦½**
   - æŒ‰ `Ctrl+Shift+V` é–‹å•Ÿé è¦½
   - ç¢ºèªåœ–è¡¨æ­£ç¢ºæ¸²æŸ“

3. **ç·šä¸Šé©—è­‰**ï¼ˆå¯é¸ï¼‰
   - è¤‡è£½åˆ° https://mermaid.live/
   - ç¢ºèªåœ¨æ¨™æº–ç’°å¢ƒä¸­ä¹Ÿèƒ½æ¸²æŸ“

4. **åŸ·è¡Œèªæ³•æª¢æŸ¥**
   ```bash
   bash check_mermaid.sh
   ```

---

## å°ˆæ¡ˆç‰¹å®šé…ç½®

### å·¥ä½œå€é…ç½®

**æª”æ¡ˆä½ç½®**ï¼š`.vscode/settings.json`ï¼ˆå°ˆæ¡ˆæ ¹ç›®éŒ„ï¼‰

**å»ºè­°é…ç½®**ï¼š
```json
{
  "files.associations": {
    "*.md": "markdown"
  },

  "editor.wordWrap": "on",
  "editor.wordWrapColumn": 80,

  "markdown.preview.breaks": true,
  "markdown.preview.linkify": true,

  "[markdown]": {
    "editor.defaultFormatter": "yzhang.markdown-all-in-one",
    "editor.formatOnSave": false,
    "editor.quickSuggestions": {
      "comments": "on",
      "strings": "on",
      "other": "on"
    }
  }
}
```

**èªªæ˜**ï¼š
- ç¢ºä¿ `.md` æ–‡ä»¶è¢«è­˜åˆ¥ç‚º Markdown
- å•Ÿç”¨è‡ªå‹•æ›è¡Œï¼ˆ80 å­—å…ƒï¼‰
- å•Ÿç”¨é€£çµè‡ªå‹•è­˜åˆ¥
- é‡å° Markdown æ–‡ä»¶çš„ç‰¹æ®Šè¨­å®š

---

### Git é…ç½®

**`.gitignore` ä¸­çš„ Mermaid ç›¸é—œ**ï¼š
```gitignore
# Markdown Preview Enhanced ç”Ÿæˆçš„æª”æ¡ˆ
.crossnote/
_book/
_preview/

# åŒ¯å‡ºçš„ PDF/HTML
*.pdf
*.html

# ä½†ä¿ç•™æ–‡ä»¶ç›®éŒ„ä¸­çš„æ–‡ä»¶
!docs/**/*.pdf
!docs/**/*.html
```

---

### å°ˆæ¡ˆæ–‡ä»¶çµæ§‹

```
PatentWriterAgent/
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ A0-A8_*_IDEF0.md          # åŒ…å« Mermaid åœ–è¡¨
â”‚   â””â”€â”€ troubleshooting/
â”‚       â”œâ”€â”€ Mermaid_*.md          # Mermaid ç›¸é—œæ–‡ä»¶
â”‚       â””â”€â”€ 2025-10-30_*.md       # æ™‚é–“åºè¨˜éŒ„
â”‚
â”œâ”€â”€ .vscode/
â”‚   â””â”€â”€ settings.json             # å·¥ä½œå€è¨­å®š
â”‚
â”œâ”€â”€ check_mermaid.sh              # èªæ³•æª¢æŸ¥è…³æœ¬
â””â”€â”€ README.md                     # åŒ…å« Mermaid ä½¿ç”¨èªªæ˜
```

---

## é…ç½®é©—è­‰

### é©—è­‰æ¸…å–®

**æ“´å……å¥—ä»¶æª¢æŸ¥**ï¼š
```bash
# ç¢ºèªæ‰€æœ‰ Mermaid ç›¸é—œæ“´å……å¥—ä»¶å·²å®‰è£
code --list-extensions | grep -i mermaid

# é æœŸè¼¸å‡ºï¼ˆ3 å€‹æ“´å……å¥—ä»¶ï¼‰ï¼š
# bierner.markdown-mermaid
# bpruitt-goddard.mermaid-markdown-syntax-highlighting
# shd101wyy.markdown-preview-enhanced
```

**å¿«æ·éµæª¢æŸ¥**ï¼š
1. é–‹å•Ÿä»»æ„ Markdown æ–‡ä»¶
2. æŒ‰ `Ctrl+Shift+V`
3. ç¢ºèª Markdown Preview Enhanced è¦–çª—é–‹å•Ÿ

**èªæ³•æª¢æŸ¥**ï¼š
```bash
bash check_mermaid.sh

# é æœŸè¼¸å‡ºï¼š
# âœ… æ‰€æœ‰èªæ³•ç¬¦åˆå»ºè­°è¦ç¯„ï¼
# - graph èªæ³•: 0 å€‹
# - flowchart èªæ³•: 57 å€‹
```

**æ¸²æŸ“æª¢æŸ¥**ï¼š
1. é–‹å•Ÿ `docs/troubleshooting/Mermaid_å¿«é€Ÿæ¸¬è©¦.md`
2. æŒ‰ `Ctrl+Shift+V`
3. ç¢ºèªæ‰€æœ‰ 4 å€‹æ¸¬è©¦åœ–è¡¨æ­£ç¢ºé¡¯ç¤º

---

### æ¸¬è©¦æ¡ˆä¾‹

**æ¸¬è©¦æ–‡ä»¶ä½ç½®**ï¼š`docs/troubleshooting/Mermaid_å¿«é€Ÿæ¸¬è©¦.md`

**æ¸¬è©¦é …ç›®**ï¼š
1. âœ… æ¸¬è©¦ 1ï¼šç°¡å–®æµç¨‹åœ–ï¼ˆ2 å€‹ç¯€é»ï¼‰
2. âœ… æ¸¬è©¦ 2ï¼šå¸¶æ¨™ç±¤çš„æµç¨‹åœ–ï¼ˆ3 å€‹ç¯€é»ï¼‰
3. âœ… æ¸¬è©¦ 3ï¼šä¸­ç­‰è¤‡é›œåº¦ï¼ˆ4 å€‹ç¯€é» + è™›ç·šï¼‰
4. âœ… æ¸¬è©¦ 4ï¼šå¸¶ subgraphï¼ˆå¯èƒ½éœ€è¦ç¨ç«‹é è¦½ï¼‰

---

## ç¶­è­·å»ºè­°

### å®šæœŸç¶­è­·ä»»å‹™

**æ¯æœˆ**ï¼š
- [ ] æª¢æŸ¥æ“´å……å¥—ä»¶æ›´æ–°
- [ ] åŸ·è¡Œ `check_mermaid.sh` ç¢ºèªèªæ³•è¦ç¯„
- [ ] æ¸¬è©¦é è¦½åŠŸèƒ½æ˜¯å¦æ­£å¸¸

**æ¯å­£åº¦**ï¼š
- [ ] æ›´æ–°æ“´å……å¥—ä»¶åˆ°æœ€æ–°ç‰ˆæœ¬
- [ ] æª¢é–± Mermaid.js å®˜æ–¹ Release Notes
- [ ] æ›´æ–° Mermaid ä½¿ç”¨æŒ‡å—ï¼ˆå¦‚æœ‰æ–°åŠŸèƒ½ï¼‰

**é‡åˆ°å•é¡Œæ™‚**ï¼š
- [ ] æŸ¥çœ‹ `docs/troubleshooting/` ä¸­çš„é™¤éŒ¯è¨˜éŒ„
- [ ] åœ¨ç·šä¸Šå¹³å°é©—è­‰èªæ³•
- [ ] æª¢æŸ¥æ“´å……å¥—ä»¶ç‰ˆæœ¬ç›¸å®¹æ€§
- [ ] è¨˜éŒ„æ–°çš„å•é¡Œå’Œè§£æ±ºæ–¹æ¡ˆ

---

### å‚™ä»½ç­–ç•¥

**é…ç½®æª”æ¡ˆå‚™ä»½**ï¼š
```bash
# å‚™ä»½å¿«æ·éµé…ç½®
cp "$APPDATA/Code/User/keybindings.json" ./backups/keybindings_$(date +%Y%m%d).json

# å‚™ä»½ VS Code è¨­å®š
cp "$APPDATA/Code/User/settings.json" ./backups/settings_$(date +%Y%m%d).json
```

**å»ºè­°**ï¼š
- å°‡ `keybindings.json` çš„å…§å®¹è¨˜éŒ„åœ¨å°ˆæ¡ˆæ–‡ä»¶ä¸­
- å®šæœŸå‚™ä»½åˆ° Git å€‰åº«å¤–çš„å®‰å…¨ä½ç½®
- é‡æ–°å®‰è£ç³»çµ±å‰å‹™å¿…å‚™ä»½

---

### ç–‘é›£æ’è§£

**å¸¸è¦‹å•é¡Œå¿«é€Ÿåƒè€ƒ**ï¼š

| å•é¡Œ | æª¢æŸ¥é …ç›® | è§£æ±ºæ–‡ä»¶ |
|-----|---------|---------|
| å¿«æ·éµç„¡æ•ˆ | æª¢æŸ¥ keybindings.json | [Mermaid_å¿«æ·éµè¨­å®šæŒ‡å—.md] |
| åœ–è¡¨é–ƒçˆ | æª¢æŸ¥èªæ³•å’Œæ“´å……å¥—ä»¶ | [Mermaid_æ•…éšœæ’é™¤.md] |
| ç„¡æ³•æ¸²æŸ“ | ç·šä¸Šé©—è­‰èªæ³• | [Mermaid_ä½¿ç”¨æŒ‡å—.md] |
| æ¨£å¼ç•°å¸¸ | æª¢æŸ¥ä¸»é¡Œè¨­å®š | [æœ¬æ–‡ä»¶ - VS Code æ“´å……å¥—ä»¶é…ç½®] |

---

### å‡ç´šè·¯å¾‘

**æœªä¾†å¯èƒ½çš„æ”¹é€²**ï¼š

1. **CI/CD æ•´åˆ**
   - åœ¨ Git pre-commit hook ä¸­è‡ªå‹•åŸ·è¡Œ `check_mermaid.sh`
   - é˜»æ­¢æäº¤ä¸ç¬¦åˆè¦ç¯„çš„ Mermaid èªæ³•

2. **è‡ªå‹•åŒ–åŒ¯å‡º**
   - å®šæœŸå°‡ Mermaid åœ–è¡¨åŒ¯å‡ºç‚º PNG
   - ç”¨æ–¼æ–‡ä»¶æ­¸æª”æˆ–åˆ†äº«

3. **è‡ªè¨‚ä¸»é¡Œ**
   - å»ºç«‹ç¬¦åˆå…¬å¸ CI çš„ Mermaid ä¸»é¡Œ
   - çµ±ä¸€æ‰€æœ‰å°ˆæ¡ˆçš„è¦–è¦ºé¢¨æ ¼

4. **åœ–è¡¨ç‰ˆæœ¬æ§åˆ¶**
   - ç‚ºé‡è¦åœ–è¡¨å»ºç«‹ç‰ˆæœ¬æ­·å²
   - è¿½è¹¤æ¶æ§‹æ¼”é€²éç¨‹

---

## é™„éŒ„

### A. å®Œæ•´çš„é…ç½®æ–‡ä»¶å…§å®¹

**keybindings.json**ï¼š
```json
[
    {
        "key": "ctrl+a ctrl+a",
        "command": "workbench.view.extension.claude-sidebar"
    },
    {
        "key": "ctrl+shift+v",
        "command": "markdown-preview-enhanced.openPreview",
        "when": "editorLangId == markdown"
    },
    {
        "key": "ctrl+k v",
        "command": "markdown.showPreview",
        "when": "editorLangId == markdown"
    }
]
```

**settings.jsonï¼ˆMarkdown Preview Enhanced ç›¸é—œï¼‰**ï¼š
```json
{
  "markdown-preview-enhanced.mermaidTheme": "default",
  "markdown-preview-enhanced.codeBlockTheme": "github.css",
  "markdown-preview-enhanced.previewTheme": "github-light.css",
  "markdown-preview-enhanced.automaticallyShowPreviewOfMarkdownBeingEdited": false,
  "markdown-preview-enhanced.enableEmojiSyntax": true,
  "markdown-preview-enhanced.mathRenderingOption": "KaTeX"
}
```

---

### B. æ“´å……å¥—ä»¶å•†åº—é€£çµ

1. **Markdown Preview Enhanced**
   - Marketplaceï¼šhttps://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced
   - GitHubï¼šhttps://github.com/shd101wyy/markdown-preview-enhanced

2. **Markdown Preview Mermaid Support**
   - Marketplaceï¼šhttps://marketplace.visualstudio.com/items?itemName=bierner.markdown-mermaid
   - GitHubï¼šhttps://github.com/mjbvz/vscode-markdown-mermaid

3. **Mermaid Markdown Syntax Highlighting**
   - Marketplaceï¼šhttps://marketplace.visualstudio.com/items?itemName=bpruitt-goddard.mermaid-markdown-syntax-highlighting
   - GitHubï¼šhttps://github.com/bpruitt-goddard/vscode-mermaid-syntax-highlight

---

### C. ç›¸é—œè³‡æº

**å®˜æ–¹æ–‡ä»¶**ï¼š
- Mermaid.jsï¼šhttps://mermaid.js.org/
- VS Code Keybindingsï¼šhttps://code.visualstudio.com/docs/getstarted/keybindings

**å°ˆæ¡ˆå…§éƒ¨æ–‡ä»¶**ï¼š
- [2025-10-30_Mermaidé è¦½å•é¡Œå®Œæ•´è§£æ±ºæ­·ç¨‹.md](2025-10-30_Mermaidé è¦½å•é¡Œå®Œæ•´è§£æ±ºæ­·ç¨‹.md)
- [Mermaid_ä½¿ç”¨æŒ‡å—.md](Mermaid_ä½¿ç”¨æŒ‡å—.md)
- [Mermaid_æ•…éšœæ’é™¤.md](Mermaid_æ•…éšœæ’é™¤.md)

---

**æ–‡ä»¶å»ºç«‹æ™‚é–“**ï¼š2025-10-30
**æœ€å¾Œæ›´æ–°æ™‚é–“**ï¼š2025-10-30
**ä¸‹æ¬¡æª¢é–±æ—¥æœŸ**ï¼š2026-01-30
**æ–‡ä»¶ç‹€æ…‹**ï¼šâœ… å·²å®Œæˆä¸¦é©—è­‰
