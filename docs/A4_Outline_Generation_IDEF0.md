# A4 å¤§ç¶±ç”Ÿæˆæ¨¡çµ„ IDEF0 è©³ç´°è¨­è¨ˆ

## æ–‡ä»¶è³‡è¨Š
- **æ¨¡çµ„ç·¨è™Ÿ**: A4
- **æ¨¡çµ„åç¨±**: å¤§ç¶±ç”Ÿæˆ
- **è‹±æ–‡åç¨±**: Outline Generation
- **ç‰ˆæœ¬**: v1.0
- **å»ºç«‹æ—¥æœŸ**: 2025-10-30
- **çˆ¶æ¨¡çµ„**: A0 - å°ˆåˆ©æ–‡ä»¶è‡ªå‹•ç”Ÿæˆç³»çµ±

---

## æ¨¡çµ„æ¦‚è¿°

### åŠŸèƒ½æè¿°
å¤§ç¶±ç”Ÿæˆæ¨¡çµ„åŸºæ–¼è§£æçš„æŠ€è¡“è³‡è¨Šå’Œæª¢ç´¢çš„å°ˆåˆ©ç¯„ä¾‹,ç”Ÿæˆç¬¦åˆä¸­åœ‹å°ˆåˆ©æ³•è¦ç¯„çš„æ–‡ä»¶å¤§ç¶±çµæ§‹,ç‚ºå¾ŒçºŒçš„å…§å®¹æ’°å¯«æä¾›æ¸…æ™°çš„çµ„ç¹”æ¡†æ¶ã€‚

### æ ¸å¿ƒè·è²¬
1. **ç« ç¯€çµæ§‹è¦åŠƒ**: è¦åŠƒå°ˆåˆ©æ–‡ä»¶çš„å®Œæ•´ç« ç¯€æ¶æ§‹
2. **å…§å®¹è¦é»æå–**: ç¢ºå®šæ¯å€‹ç« ç¯€çš„æ ¸å¿ƒå…§å®¹è¦é»
3. **é‚è¼¯éˆæ§‹å»º**: å»ºç«‹æŠ€è¡“å•é¡Œ-æŠ€è¡“æ–¹æ¡ˆ-æŠ€è¡“æ•ˆæœçš„é‚è¼¯éˆ
4. **å¤§ç¶±å„ªåŒ–èˆ‡é©—è­‰**: ç¢ºä¿å¤§ç¶±ç¬¦åˆå°ˆåˆ©æ³•è¦æ±‚

---

## A4-0: æƒ…å¢ƒåœ–

```mermaid
graph LR
    subgraph External["å¤–éƒ¨å¯¦é«”"]
        A3["A3: å°ˆåˆ©æª¢ç´¢"]
        A5["A5: å…§å®¹æ’°å¯«"]
    end

    subgraph A4_System["A4-0: å¤§ç¶±ç”Ÿæˆç³»çµ±"]
        A4["å¤§ç¶±ç”Ÿæˆ<br/>Outline Generation"]
    end

    subgraph Controls["æ§åˆ¶æ¢ä»¶"]
        PatentLaw["å°ˆåˆ©æ³•ç« ç¯€è¦ç¯„"]
        WordReq["å­—æ•¸è¦æ±‚"]
        LogicRules["é‚è¼¯å®Œæ•´æ€§è¦å‰‡"]
    end

    subgraph Outputs["ç³»çµ±è¼¸å‡º"]
        Outline["ğŸ“‹ patent_outline.md"]
        Mapping["ğŸ—ºï¸ structure_mapping.json"]
    end

    A3 -->|similar_patents.json| A4
    A3 -->|prior_art_analysis.md| A4
    Controls -.æ§åˆ¶.-> A4

    A4 -->|å¤§ç¶±æ–‡æª”| Outline
    A4 -->|çµæ§‹æ˜ å°„| Mapping

    Outline --> A5
    Mapping --> A5

    style A4 fill:#C8E6C9,stroke:#388E3C,stroke-width:3px
```

---

## A4: é ‚å±¤åŠŸèƒ½åˆ†è§£

```mermaid
graph TB
    subgraph A4["A4: å¤§ç¶±ç”Ÿæˆ"]
        A41["A4.1<br/>ç« ç¯€çµæ§‹è¦åŠƒ<br/>Section Planning"]
        A42["A4.2<br/>å…§å®¹è¦é»æå–<br/>Content Extraction"]
        A43["A4.3<br/>é‚è¼¯éˆæ§‹å»º<br/>Logic Chain Building"]
        A44["A4.4<br/>å¤§ç¶±å„ªåŒ–èˆ‡é©—è­‰<br/>Optimization & Validation"]
    end

    Input["ğŸ“Š æŠ€è¡“è³‡è¨Š + å°ˆåˆ©ç¯„ä¾‹"] --> A41
    A41 --> Structure["ğŸ“‘ ç« ç¯€æ¶æ§‹"]

    Structure --> A42
    A42 --> Points["ğŸ“ å…§å®¹è¦é»"]

    Points --> A43
    A43 --> LogicChain["ğŸ”— é‚è¼¯éˆ"]

    LogicChain --> A44
    A44 --> Output["ğŸ“‹ patent_outline.md"]

    style A4 fill:#E8F5E9,stroke:#388E3C,stroke-width:2px
```

---

## å­åŠŸèƒ½è©³ç´°è¨­è¨ˆ

### A4.1: ç« ç¯€çµæ§‹è¦åŠƒ

#### åŠŸèƒ½æè¿°
åŸºæ–¼å°ˆåˆ©æ³•è¦ç¯„å’Œåƒè€ƒå°ˆåˆ©çš„çµæ§‹,è¦åŠƒå®Œæ•´çš„ç« ç¯€æ¶æ§‹ã€‚

#### ICOM åˆ†æ

| è¦ç´  | é …ç›® | è©³ç´°èªªæ˜ |
|------|------|----------|
| **Input** | æŠ€è¡“è³‡è¨Š | parsed_info.json |
| | åƒè€ƒå°ˆåˆ©çµæ§‹ | similar_patents çš„ç« ç¯€çµ„ç¹” |
| **Control** | å°ˆåˆ©æ³•ç« ç¯€è¦ç¯„ | ç™¼æ˜åç¨±ã€æ‘˜è¦ã€æ¬Šåˆ©è¦æ±‚ã€èªªæ˜æ›¸ã€é™„åœ– |
| | ç« ç¯€é †åº | æŠ€è¡“é ˜åŸŸ â†’ èƒŒæ™¯æŠ€è¡“ â†’ ç™¼æ˜å…§å®¹ â†’ å¯¦æ–½æ–¹å¼ |
| **Output** | ç« ç¯€æ¶æ§‹ | ä¸‰ç´šæ¨™é¡Œçµæ§‹ |
| | ç« ç¯€æ¨¡æ¿ | æ¯å€‹ç« ç¯€çš„å…§å®¹æ¡†æ¶ |
| **Mechanism** | Claude AI | çµæ§‹åŒ–è¦åŠƒ |
| | ç« ç¯€æ¨¡æ¿åº« | é å®šç¾©æ¨¡æ¿ |

#### æ¨™æº–ç« ç¯€çµæ§‹

```markdown
# å°ˆåˆ©å¤§ç¶±

## 1. ç™¼æ˜åç¨±
[åŸºæ–¼æ ¸å¿ƒæŠ€è¡“çš„ç°¡æ½”åç¨±,<25å­—]

## 2. æŠ€è¡“é ˜åŸŸ
[æ‰€å±¬æŠ€è¡“é ˜åŸŸçš„æ˜ç¢ºèªªæ˜,50-100å­—]

## 3. èƒŒæ™¯æŠ€è¡“
### 3.1 æŠ€è¡“èƒŒæ™¯ä»‹ç´¹
### 3.2 ç¾æœ‰æŠ€è¡“æ–¹æ¡ˆ
### 3.3 ç¾æœ‰æŠ€è¡“å­˜åœ¨çš„å•é¡Œ

## 4. ç™¼æ˜å…§å®¹
### 4.1 ç™¼æ˜ç›®çš„
### 4.2 æŠ€è¡“æ–¹æ¡ˆ
#### 4.2.1 ç¸½é«”æŠ€è¡“æ–¹æ¡ˆ
#### 4.2.2 é—œéµæŠ€è¡“ç‰¹å¾µ
#### 4.2.3 å¯é¸æŠ€è¡“ç‰¹å¾µ
### 4.3 æœ‰ç›Šæ•ˆæœ

## 5. é™„åœ–èªªæ˜
### 5.1 åœ–1: [ç³»çµ±æ¶æ§‹åœ–]
### 5.2 åœ–2: [æ–¹æ³•æµç¨‹åœ–]
### 5.3 åœ–3: [æ¨¡çµ„çµæ§‹åœ–]

## 6. å…·é«”å¯¦æ–½æ–¹å¼
### 6.1 æ•´é«”æ–¹æ¡ˆæè¿°
### 6.2 å¯¦æ–½ä¾‹1: [ä¸»è¦å¯¦æ–½æ–¹å¼]
### 6.3 å¯¦æ–½ä¾‹2: [è®ŠåŒ–å¯¦æ–½æ–¹å¼]
### 6.4 å¯¦æ–½ä¾‹3: [å¯é¸å¯¦æ–½æ–¹å¼]

## 7. æ¬Šåˆ©è¦æ±‚æ›¸
### 7.1 ç¨ç«‹æ¬Šåˆ©è¦æ±‚1 (æ–¹æ³•)
### 7.2 å¾å±¬æ¬Šåˆ©è¦æ±‚2-10
### 7.3 ç¨ç«‹æ¬Šåˆ©è¦æ±‚11 (ç³»çµ±)
### 7.4 å¾å±¬æ¬Šåˆ©è¦æ±‚12-20

## 8. æ‘˜è¦
[æŠ€è¡“æ–¹æ¡ˆç°¡è¦æè¿°,200-300å­—]
```

---

### A4.2: å…§å®¹è¦é»æå–

#### åŠŸèƒ½æè¿°
ç‚ºæ¯å€‹ç« ç¯€æå–å…·é«”çš„å…§å®¹è¦é»,ç¢ºå®šéœ€è¦æ’°å¯«çš„æ ¸å¿ƒå…§å®¹ã€‚

#### å¯¦ä½œç¯„ä¾‹

```python
async def extract_content_points(
    parsed_info: ParsedInfo,
    similar_patents: List[Dict],
    claude_client
) -> Dict[str, List[str]]:
    """æå–å„ç« ç¯€å…§å®¹è¦é»"""

    prompt = f"""
åŸºæ–¼ä»¥ä¸‹æŠ€è¡“è³‡è¨Šå’Œåƒè€ƒå°ˆåˆ©,ç‚ºå°ˆåˆ©å¤§ç¶±çš„æ¯å€‹ç« ç¯€æå–å…§å®¹è¦é»:

æŠ€è¡“è³‡è¨Š:
{json.dumps(parsed_info.model_dump(), ensure_ascii=False, indent=2)}

åƒè€ƒå°ˆåˆ©:
{format_patents(similar_patents[:3])}

è«‹ç‚ºä»¥ä¸‹ç« ç¯€æå– 3-5 å€‹å…§å®¹è¦é»:
1. æŠ€è¡“é ˜åŸŸ
2. èƒŒæ™¯æŠ€è¡“
3. ç™¼æ˜å…§å®¹
4. å…·é«”å¯¦æ–½æ–¹å¼

è¼¸å‡º JSON æ ¼å¼:
{{
  "technical_field": ["è¦é»1", "è¦é»2"],
  "background": ["è¦é»1", "è¦é»2", "è¦é»3"],
  "invention_content": ["è¦é»1", "è¦é»2", "è¦é»3"],
  "embodiments": ["è¦é»1", "è¦é»2", "è¦é»3", "è¦é»4"]
}}
"""

    response = await claude_client.messages.create(
        model="claude-3-5-sonnet-20241022",
        max_tokens=2048,
        messages=[{"role": "user", "content": prompt}]
    )

    return json.loads(response.content[0].text)
```

---

### A4.3: é‚è¼¯éˆæ§‹å»º

#### åŠŸèƒ½æè¿°
æ§‹å»º"æŠ€è¡“å•é¡Œ â†’ æŠ€è¡“æ–¹æ¡ˆ â†’ æŠ€è¡“æ•ˆæœ"çš„å®Œæ•´é‚è¼¯éˆ,ç¢ºä¿å°ˆåˆ©çš„é‚è¼¯è‡ªæ´½æ€§ã€‚

#### é‚è¼¯éˆæ¨¡å‹

```mermaid
flowchart LR
    Problem["æŠ€è¡“å•é¡Œ<br/>Problem"] --> Solution["æŠ€è¡“æ–¹æ¡ˆ<br/>Solution"]
    Solution --> Effect["æŠ€è¡“æ•ˆæœ<br/>Effect"]

    Problem -.å°æ‡‰.-> Background["èƒŒæ™¯æŠ€è¡“ç« ç¯€"]
    Solution -.å°æ‡‰.-> Invention["ç™¼æ˜å…§å®¹ç« ç¯€"]
    Effect -.å°æ‡‰.-> Advantages["æœ‰ç›Šæ•ˆæœç« ç¯€"]

    style Problem fill:#FFCDD2,stroke:#C62828
    style Solution fill:#C8E6C9,stroke:#388E3C
    style Effect fill:#BBDEFB,stroke:#1976D2
```

#### é‚è¼¯é©—è­‰è¦å‰‡

```python
def validate_logic_chain(outline: Dict) -> Dict[str, bool]:
    """é©—è­‰é‚è¼¯éˆå®Œæ•´æ€§"""

    checks = {
        "has_problem": False,
        "has_solution": False,
        "has_effect": False,
        "problem_solution_match": False,
        "solution_effect_match": False
    }

    # 1. æª¢æŸ¥æ˜¯å¦åŒ…å«æŠ€è¡“å•é¡Œ
    background = outline.get("background", {})
    if background.get("problems") and len(background["problems"]) > 0:
        checks["has_problem"] = True

    # 2. æª¢æŸ¥æ˜¯å¦åŒ…å«æŠ€è¡“æ–¹æ¡ˆ
    invention = outline.get("invention_content", {})
    if invention.get("technical_solution"):
        checks["has_solution"] = True

    # 3. æª¢æŸ¥æ˜¯å¦åŒ…å«æŠ€è¡“æ•ˆæœ
    if invention.get("advantages") and len(invention["advantages"]) > 0:
        checks["has_effect"] = True

    # 4. é©—è­‰å•é¡Œèˆ‡æ–¹æ¡ˆçš„å°æ‡‰é—œä¿‚
    # (ä½¿ç”¨ AI é€²è¡Œèªæ„åŒ¹é…)
    if checks["has_problem"] and checks["has_solution"]:
        checks["problem_solution_match"] = verify_problem_solution_match(
            background["problems"],
            invention["technical_solution"]
        )

    # 5. é©—è­‰æ–¹æ¡ˆèˆ‡æ•ˆæœçš„å°æ‡‰é—œä¿‚
    if checks["has_solution"] and checks["has_effect"]:
        checks["solution_effect_match"] = verify_solution_effect_match(
            invention["technical_solution"],
            invention["advantages"]
        )

    return checks
```

---

### A4.4: å¤§ç¶±å„ªåŒ–èˆ‡é©—è­‰

#### åŠŸèƒ½æè¿°
å„ªåŒ–å¤§ç¶±çµæ§‹,ç¢ºä¿ç¬¦åˆå°ˆåˆ©æ³•è¦æ±‚å’Œè³ªé‡æ¨™æº–ã€‚

#### å„ªåŒ–è¦å‰‡

| æª¢æŸ¥é …ç›® | æ¨™æº– | å„ªåŒ–ç­–ç•¥ |
|---------|------|---------|
| **ç« ç¯€å®Œæ•´æ€§** | å¿…é ˆåŒ…å« 8 å€‹ä¸»è¦ç« ç¯€ | è£œå……ç¼ºå¤±ç« ç¯€ |
| **é‚è¼¯å®Œæ•´æ€§** | å•é¡Œ-æ–¹æ¡ˆ-æ•ˆæœéˆå®Œæ•´ | AI è£œå……ç¼ºå¤±ç’°ç¯€ |
| **è©³ç´°åº¦** | æ¯å€‹ç« ç¯€è‡³å°‘ 3 å€‹è¦é» | æ“´å±•å…§å®¹è¦é» |
| **å­—æ•¸é ä¼°** | èªªæ˜æ›¸é ä¼° > 10000 å­— | å¢åŠ å¯¦æ–½ä¾‹æ•¸é‡ |
| **è¡“èªä¸€è‡´æ€§** | å…¨æ–‡ä½¿ç”¨çµ±ä¸€è¡“èª | å»ºç«‹è¡“èªè©å…¸ |

#### å¤§ç¶±è©•åˆ†æ©Ÿåˆ¶

```python
def score_outline(outline: Dict) -> Dict[str, float]:
    """å¤§ç¶±è³ªé‡è©•åˆ†"""

    scores = {
        "completeness": 0.0,      # å®Œæ•´æ€§ (30%)
        "logic": 0.0,             # é‚è¼¯æ€§ (30%)
        "detail": 0.0,            # è©³ç´°åº¦ (20%)
        "structure": 0.0,         # çµæ§‹æ€§ (20%)
        "total": 0.0
    }

    # 1. å®Œæ•´æ€§è©•åˆ†
    required_sections = [
        "title", "technical_field", "background",
        "invention_content", "embodiments", "claims", "abstract"
    ]
    present_sections = sum(1 for sec in required_sections if sec in outline)
    scores["completeness"] = (present_sections / len(required_sections)) * 30

    # 2. é‚è¼¯æ€§è©•åˆ†
    logic_checks = validate_logic_chain(outline)
    logic_score = sum(logic_checks.values()) / len(logic_checks)
    scores["logic"] = logic_score * 30

    # 3. è©³ç´°åº¦è©•åˆ†
    total_points = sum(
        len(outline.get(sec, {}).get("points", []))
        for sec in ["background", "invention_content", "embodiments"]
    )
    scores["detail"] = min(total_points / 15, 1.0) * 20  # 15 å€‹è¦é»å¾—æ»¿åˆ†

    # 4. çµæ§‹æ€§è©•åˆ†
    has_hierarchy = check_hierarchical_structure(outline)
    has_numbering = check_section_numbering(outline)
    scores["structure"] = (has_hierarchy + has_numbering) / 2 * 20

    # ç¸½åˆ†
    scores["total"] = sum(scores[k] for k in ["completeness", "logic", "detail", "structure"])

    return scores
```

---

## ç« ç¯€æ¨¡æ¿åº«

### æŠ€è¡“é ˜åŸŸæ¨¡æ¿

```markdown
**æ¨¡æ¿**: æœ¬ç™¼æ˜æ¶‰åŠ{ä¸»æŠ€è¡“é ˜åŸŸ}é ˜åŸŸ,å…·é«”æ¶‰åŠ{ç´°åˆ†é ˜åŸŸ},å°¤å…¶æ¶‰åŠ{å…·é«”æŠ€è¡“é»}ã€‚

**ç¯„ä¾‹**: æœ¬ç™¼æ˜æ¶‰åŠäººå·¥æ™ºæ…§æŠ€è¡“é ˜åŸŸ,å…·é«”æ¶‰åŠè‡ªç„¶èªè¨€è™•ç†é ˜åŸŸ,å°¤å…¶æ¶‰åŠä¸€ç¨®åŸºæ–¼å¤§èªè¨€æ¨¡å‹çš„å°ˆåˆ©æ–‡ä»¶è‡ªå‹•ç”Ÿæˆæ–¹æ³•åŠç³»çµ±ã€‚
```

### èƒŒæ™¯æŠ€è¡“æ¨¡æ¿

```markdown
**çµæ§‹**:
1. æŠ€è¡“èƒŒæ™¯ä»‹ç´¹ (50-100å­—)
2. ç¾æœ‰æŠ€è¡“æ–¹æ¡ˆ1 (100-150å­—)
3. ç¾æœ‰æŠ€è¡“æ–¹æ¡ˆ2 (100-150å­—)
4. ç¾æœ‰æŠ€è¡“å­˜åœ¨çš„å•é¡Œ (150-200å­—)
   - å•é¡Œ1: ...
   - å•é¡Œ2: ...
   - å•é¡Œ3: ...

**ç¯„ä¾‹**:
éš¨è‘—çŸ¥è­˜ç”¢æ¬Šä¿è­·æ„è­˜çš„å¢å¼·,å°ˆåˆ©ç”³è«‹æ•¸é‡é€å¹´å¢åŠ ã€‚å°ˆåˆ©æ–‡ä»¶çš„æ’°å¯«éœ€è¦å°ˆæ¥­çŸ¥è­˜å’Œè±å¯Œç¶“é©—,ç¾æœ‰æŠ€è¡“ä¸»è¦ä¾é äººå·¥æ’°å¯«ã€‚

ç¾æœ‰æŠ€è¡“æ–¹æ¡ˆä¸€æ˜¯å®Œå…¨äººå·¥æ’°å¯«,ç”±å°ˆåˆ©ä»£ç†äººæ ¹æ“šæŠ€è¡“äº¤åº•æ›¸æ’°å¯«å°ˆåˆ©ç”³è«‹æ–‡ä»¶ã€‚è©²æ–¹æ¡ˆçš„å„ªé»æ˜¯è³ªé‡æœ‰ä¿éšœ,ä½†å­˜åœ¨æ•ˆç‡ä½ã€æˆæœ¬é«˜ã€å°æ’°å¯«äººå“¡è¦æ±‚é«˜çš„å•é¡Œã€‚

ç¾æœ‰æŠ€è¡“æ–¹æ¡ˆäºŒæ˜¯ä½¿ç”¨ç°¡å–®çš„æ¨¡æ¿ç”Ÿæˆå·¥å…·,å°‡æŠ€è¡“å…§å®¹å¡«å……åˆ°é å®šç¾©æ¨¡æ¿ä¸­ã€‚è©²æ–¹æ¡ˆçš„å„ªé»æ˜¯é€Ÿåº¦å¿«,ä½†å­˜åœ¨éˆæ´»æ€§å·®ã€è³ªé‡ä¸ç©©å®šã€ç„¡æ³•è™•ç†è¤‡é›œæŠ€è¡“æ–¹æ¡ˆçš„å•é¡Œã€‚

å› æ­¤,ç¾æœ‰æŠ€è¡“å­˜åœ¨ä»¥ä¸‹å•é¡Œ:
1. äººå·¥æ’°å¯«æ•ˆç‡ä½ä¸‹,é€±æœŸé•·é”æ•¸é€±
2. å°ˆæ¥­äººæ‰çŸ­ç¼º,æˆæœ¬é«˜æ˜‚
3. æ¨¡æ¿å·¥å…·éˆæ´»æ€§ä¸è¶³,ç„¡æ³•é©æ‡‰å¤šæ¨£åŒ–éœ€æ±‚
4. è³ªé‡åƒå·®ä¸é½Š,ç¼ºä¹çµ±ä¸€æ¨™æº–
```

### ç™¼æ˜å…§å®¹æ¨¡æ¿

```markdown
**çµæ§‹**:
1. ç™¼æ˜ç›®çš„ (100å­—)
2. æŠ€è¡“æ–¹æ¡ˆ
   - ç¸½é«”æ–¹æ¡ˆ (200-300å­—)
   - é—œéµæŠ€è¡“ç‰¹å¾µ (æ¯å€‹ 50-100å­—)
   - å¯é¸æŠ€è¡“ç‰¹å¾µ (æ¯å€‹ 30-50å­—)
3. æœ‰ç›Šæ•ˆæœ (150-200å­—)

**ç¯„ä¾‹**:
æœ¬ç™¼æ˜çš„ç›®çš„åœ¨æ–¼æä¾›ä¸€ç¨®åŸºæ–¼å¤§èªè¨€æ¨¡å‹çš„å°ˆåˆ©æ–‡ä»¶è‡ªå‹•ç”Ÿæˆæ–¹æ³•åŠç³»çµ±,ä»¥è§£æ±ºç¾æœ‰æŠ€è¡“ä¸­å°ˆåˆ©æ’°å¯«æ•ˆç‡ä½ã€æˆæœ¬é«˜ã€è³ªé‡ä¸ç©©å®šçš„å•é¡Œã€‚

ç‚ºå¯¦ç¾ä¸Šè¿°ç›®çš„,æœ¬ç™¼æ˜æ¡ç”¨çš„æŠ€è¡“æ–¹æ¡ˆæ˜¯:
ä¸€ç¨®åŸºæ–¼å¤§èªè¨€æ¨¡å‹çš„å°ˆåˆ©æ–‡ä»¶è‡ªå‹•ç”Ÿæˆæ–¹æ³•,åŒ…æ‹¬ä»¥ä¸‹æ­¥é©Ÿ:
S1. æ¥æ”¶ä¸¦è§£ææŠ€è¡“äº¤åº•æ›¸,æå–çµæ§‹åŒ–æŠ€è¡“è³‡è¨Š
S2. æª¢ç´¢ç›¸ä¼¼å°ˆåˆ©,åˆ†æç¾æœ‰æŠ€è¡“å’Œæ’°å¯«é¢¨æ ¼
S3. ç”Ÿæˆå°ˆåˆ©æ–‡ä»¶å¤§ç¶±,æ§‹å»ºé‚è¼¯éˆ
S4. åŸºæ–¼å¤§ç¶±æ’°å¯«å„ç« ç¯€å…§å®¹
S5. ç”ŸæˆæŠ€è¡“åœ–è¡¨ä¸¦æ•´åˆç‚ºå®Œæ•´æ–‡ä»¶

é—œéµæŠ€è¡“ç‰¹å¾µåŒ…æ‹¬:
1. ä½¿ç”¨ AI é€²è¡Œæ–‡æª”è§£æå’Œè³‡è¨Šæå–
2. å¤šæºå°ˆåˆ©æª¢ç´¢å’Œæ™ºèƒ½æ’åº
3. é‚è¼¯éˆè‡ªå‹•æ§‹å»ºå’Œé©—è­‰
4. å¤š Agent å”ä½œçš„å…§å®¹ç”Ÿæˆ

æœ¬ç™¼æ˜çš„æœ‰ç›Šæ•ˆæœåœ¨æ–¼:
1. å¤§å¹…æé«˜æ’°å¯«æ•ˆç‡,å¾æ•¸é€±ç¸®çŸ­è‡³æ•¸å°æ™‚
2. é™ä½æˆæœ¬,æ¸›å°‘å°å°ˆæ¥­äººæ‰çš„ä¾è³´
3. ä¿è­‰è³ªé‡,é€šé AI é©—è­‰é‚è¼¯å®Œæ•´æ€§
4. éˆæ´»é©æ‡‰å„ç¨®æŠ€è¡“é ˜åŸŸå’Œæ’°å¯«éœ€æ±‚
```

---

## é‚è¼¯å®Œæ•´æ€§æª¢æŸ¥

### æª¢æŸ¥æ¸…å–®

```python
LOGIC_CHECKLIST = {
    "problem_defined": {
        "description": "æŠ€è¡“å•é¡Œæ˜¯å¦æ˜ç¢ºå®šç¾©",
        "location": "èƒŒæ™¯æŠ€è¡“ç« ç¯€",
        "criteria": "è‡³å°‘æè¿° 2 å€‹å…·é«”å•é¡Œ"
    },
    "solution_proposed": {
        "description": "æŠ€è¡“æ–¹æ¡ˆæ˜¯å¦å®Œæ•´æå‡º",
        "location": "ç™¼æ˜å…§å®¹ç« ç¯€",
        "criteria": "åŒ…å«ç¸½é«”æ–¹æ¡ˆå’Œé—œéµç‰¹å¾µ"
    },
    "effect_explained": {
        "description": "æŠ€è¡“æ•ˆæœæ˜¯å¦å……åˆ†èªªæ˜",
        "location": "æœ‰ç›Šæ•ˆæœç« ç¯€",
        "criteria": "æ¯å€‹å•é¡Œéƒ½æœ‰å°æ‡‰çš„è§£æ±ºæ•ˆæœ"
    },
    "problem_solution_link": {
        "description": "å•é¡Œèˆ‡æ–¹æ¡ˆæ˜¯å¦å°æ‡‰",
        "validation": "AI èªæ„åŒ¹é…",
        "threshold": 0.7
    },
    "solution_effect_link": {
        "description": "æ–¹æ¡ˆèˆ‡æ•ˆæœæ˜¯å¦å°æ‡‰",
        "validation": "AI èªæ„åŒ¹é…",
        "threshold": 0.7
    },
    "claims_aligned": {
        "description": "æ¬Šåˆ©è¦æ±‚æ˜¯å¦èˆ‡æŠ€è¡“æ–¹æ¡ˆä¸€è‡´",
        "validation": "é—œéµç‰¹å¾µè¦†è“‹åº¦",
        "threshold": 0.9
    }
}
```

---

## å¤§ç¶±å„ªåŒ–æµç¨‹

```mermaid
flowchart TD
    Start([åˆå§‹å¤§ç¶±]) --> Check1{å®Œæ•´æ€§æª¢æŸ¥}
    Check1 -->|ç¼ºå¤±ç« ç¯€| Add[è£œå……ç« ç¯€]
    Check1 -->|å®Œæ•´| Check2{é‚è¼¯æ€§æª¢æŸ¥}

    Add --> Check2
    Check2 -->|é‚è¼¯ä¸å®Œæ•´| Fix[ä¿®å¾©é‚è¼¯éˆ]
    Check2 -->|é‚è¼¯å®Œæ•´| Check3{è©³ç´°åº¦æª¢æŸ¥}

    Fix --> Check3
    Check3 -->|ä¸å¤ è©³ç´°| Expand[æ“´å±•å…§å®¹è¦é»]
    Check3 -->|è¶³å¤ è©³ç´°| Score[è¨ˆç®—è³ªé‡è©•åˆ†]

    Expand --> Score
    Score --> Quality{è©•åˆ† >= 80?}

    Quality -->|å¦| Iterate[è¿­ä»£å„ªåŒ–]
    Iterate --> Check1

    Quality -->|æ˜¯| Output([è¼¸å‡ºæœ€çµ‚å¤§ç¶±])

    style Start fill:#E8F5E9,stroke:#66BB6A
    style Output fill:#C8E6C9,stroke:#388E3C
    style Quality fill:#FFF9C4,stroke:#F57C00
```

---

## å¯¦ä½œå»ºè­°

### æŠ€è¡“é¸å‹

```python
dependencies = [
    "anthropic>=0.18.0",      # Claude AI
    "pydantic>=2.0.0",        # æ•¸æ“šé©—è­‰
    "jinja2>=3.1.0",          # æ¨¡æ¿å¼•æ“
    "markdown>=3.5.0",        # Markdown è™•ç†
]
```

### ç¨‹å¼ç¢¼çµæ§‹

```
src/
â”œâ”€â”€ outline/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ section_planner.py      # A4.1
â”‚   â”œâ”€â”€ content_extractor.py    # A4.2
â”‚   â”œâ”€â”€ logic_builder.py        # A4.3
â”‚   â”œâ”€â”€ optimizer.py            # A4.4
â”‚   â”œâ”€â”€ templates/              # ç« ç¯€æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ technical_field.md
â”‚   â”‚   â”œâ”€â”€ background.md
â”‚   â”‚   â”œâ”€â”€ invention.md
â”‚   â”‚   â””â”€â”€ embodiments.md
â”‚   â””â”€â”€ validators.py           # é©—è­‰å™¨
```

---

## ç¸½çµ

### æ¨¡çµ„ç‰¹é»

âœ… **çµæ§‹åŒ–**: åš´æ ¼çš„ç« ç¯€çµ„ç¹”
âœ… **é‚è¼¯æ€§**: å®Œæ•´çš„å•é¡Œ-æ–¹æ¡ˆ-æ•ˆæœéˆ
âœ… **å¯é©—è­‰**: è‡ªå‹•åŒ–è³ªé‡æª¢æŸ¥
âœ… **å¯æ“´å±•**: æ¨¡æ¿åŒ–è¨­è¨ˆ

### é—œéµæŒ‡æ¨™

| æŒ‡æ¨™ | ç›®æ¨™å€¼ |
|-----|-------|
| å¤§ç¶±å®Œæ•´æ€§ | 100% |
| é‚è¼¯éˆå®Œæ•´æ€§ | > 90% |
| è³ªé‡è©•åˆ† | > 80 åˆ† |
| ç”Ÿæˆæ™‚é–“ | < 5 åˆ†é˜ |

---

**æ–‡ä»¶çµæŸ**
